#
# my-prime-jennie 환경 변수 (WSL2 + Docker Compose)
# 로컬/WSL2에서 실행하기 위한 기본값입니다.

# 1. 공통 런타임 설정
TRADING_MODE: "REAL"
DRY_RUN: "false"

# 2. KIS API Secret IDs (secrets.json 키 기준)
MOCK_SECRET_ID_APP_KEY: "kis-v-app-key"
MOCK_SECRET_ID_APP_SECRET: "kis-v-app-secret"
MOCK_SECRET_ID_ACCOUNT_PREFIX: "kis-v-account-no"
REAL_SECRET_ID_APP_KEY: "kis-r-app-key"
REAL_SECRET_ID_APP_SECRET: "kis-r-app-secret"
REAL_SECRET_ID_ACCOUNT_PREFIX: "kis-r-account-no"

# 2.5 제외 종목 (콤마로 구분) - 현재 없음
EXCLUDED_STOCKS: ""

# 3. KIS API Base URLs
KIS_BASE_URL_MOCK: "https://openapivts.koreainvestment.com:29443"
KIS_BASE_URL_REAL: "https://openapi.koreainvestment.com:9443"

# 4. LLM API Keys (secrets.json 키 기준)
SECRET_ID_GEMINI_API_KEY: "gemini-api-key"
SECRET_ID_OPENAI_API_KEY: "openai-api-key"
SECRET_ID_CLAUDE_API_KEY: "claude-api-key"

# 5. 토큰 설정
KIS_TOKEN_FILE_PATH: "/tmp/kis_token.json"
KIS_ACCOUNT_SUFFIX: "01"

# 6. 하락장 대응
ALLOW_BEAR_TRADING: "true"
MIN_LLM_CONFIDENCE_BEAR: "80"

# 7. Gateway / Redis (network_mode: host용 127.0.0.1)
USE_KIS_GATEWAY: "true"
KIS_GATEWAY_URL: "http://127.0.0.1:8080"
USE_GATEWAY_AUTH: "false"
USE_DISTRIBUTED_AUTH: "false"
REDIS_URL: "redis://127.0.0.1:6379"
CIRCUIT_BREAKER_FAIL_MAX: "20"
CIRCUIT_BREAKER_TIMEOUT: "60"

# 8. RabbitMQ 설정
USE_RABBITMQ: "true"
RABBITMQ_URL: "amqp://guest:guest@127.0.0.1:5672/"
RABBITMQ_QUEUE_SELL_ORDERS: "sell-orders-real"
RABBITMQ_QUEUE_BUY_SIGNALS: "buy-signals-real"

# 10. MariaDB 설정 (비밀번호는 secrets.json에서 로드)
DB_TYPE: "MARIADB"
MARIADB_HOST: "127.0.0.1"
MARIADB_PORT: "3307"
# MARIADB_USER, MARIADB_PASSWORD는 secrets.json의 mariadb-user, mariadb-password 사용
MARIADB_DBNAME: "jennie_db"
SQLALCHEMY_POOL_SIZE: "5"
SQLALCHEMY_MAX_OVERFLOW: "20"

# 11. 로깅
LOG_LEVEL: "INFO"
PYTHONPATH: "/app"

# 12. Scheduler (로컬 운영용)
SCHEDULER_SCOPE: "real"
SCHEDULER_SERVICE_URL: "http://127.0.0.1:8095"  # network_mode: host용
SCHEDULER_DB_PATH: "/app/data/scheduler.db"
SCHEDULER_TICK_SECONDS: "5"
SCHEDULER_TIMEZONE: "Asia/Seoul"
SCHEDULER_QUEUE_SCOUT_JOB: "real.jobs.scout"
ENABLE_SCOUT_JOB_WORKER: "true"
SCHEDULER_SCOUT_JOB_ID: "scout-daily"  # jobs 테이블의 job_id와 일치해야 함

# 12-1. P0 트레이딩 로직 (3현자 Council 권고)
ENABLE_BEAR_ENTRY_BLOCK: "true"           # BEAR/STRONG_BEAR 시장 진입 차단
ENABLE_VOLUME_BREAKOUT_1MIN: "false"      # VOLUME_BREAKOUT_1MIN 비활성화 (수익률 -0.34%)
STOPLOSS_COOLDOWN_DAYS: "5"               # 손절 종목 재진입 방지 (5거래일 ≈ 7캘린더일)

# 12-2. Portfolio Guard (포트폴리오 수준 리스크 관리)
PORTFOLIO_GUARD_ENABLED: "true"
MAX_SECTOR_STOCKS: "3"                       # 동일 섹터(대분류) 최대 보유 종목 수
CASH_FLOOR_STRONG_BULL_PCT: "5"              # 급등장 현금 하한선 (%)
CASH_FLOOR_BULL_PCT: "10"                    # 상승장 현금 하한선 (%)
CASH_FLOOR_SIDEWAYS_PCT: "15"               # 횡보장 현금 하한선 (%)
CASH_FLOOR_BEAR_PCT: "25"                   # 하락장 현금 하한선 (%)

# 12-3. 모멘텀 전략 실행 최적화
MOMENTUM_LIMIT_ORDER_ENABLED: "false"
MOMENTUM_LIMIT_PREMIUM: "0.003"
MOMENTUM_LIMIT_TIMEOUT_SEC: "10"
MOMENTUM_CONFIRMATION_BARS: "0"

# 13. Watchlist 크기 제한 (Scout → Hot Watchlist)
# 하류 Scanner(9개 Risk Gate) + Executor(20개 필터)가 충분히 걸러내므로 넉넉하게 설정
MAX_WATCHLIST_SIZE: "20"

# 14. Scout Job LLM 설정
TIER_REASONING_PROVIDER: "deepseek_cloud"   # [CloudFailover] OpenRouter → DeepSeek → Ollama Cloud
TIER_THINKING_PROVIDER: "deepseek_cloud"    # [CloudFailover] OpenRouter → DeepSeek → Ollama Cloud
TIER_FAST_PROVIDER: "ollama"                # [Sentiment] Local vLLM (zero cost)
LOCAL_MODEL_FAST: "exaone3.5:7.8b"          # [News] LG Exaone 3.5 (Best for Korean Nuance & Speed)
OLLAMA_NUM_PARALLEL: "2"                    # [Optimization] Batch Priority

# 15. Scout Universe Configuration
SCOUT_UNIVERSE_SIZE: "200"
ENABLE_NEWS_ANALYSIS: "true"
SCOUT_V5_ENABLED: "true"                   # 하이브리드 스코어링 활성화

ENABLE_STARTUP_ONESHOT: "false"
AIRFLOW_FERNET_KEY=4g8yR8W14v5coc3o9xXA-yNcn4x5a8QFk57fbARQNtU=
