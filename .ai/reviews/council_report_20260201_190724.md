# Prime Council Report
- Date: 2026-02-01 19:09:36
- Query: # 매크로 인사이트 시스템 개선 방안 검토

## 현재 상황
현재 시스템은 텔레그램 채널(@hedgecat0301 키움 한지영)에서 장 시작 전 브리핑을 수집하여 3현자 Council이 분석하고 있습니다. 하지만 증권사 애널리스트의 브리핑은 하루에 한 번이고, 정보의 깊이에 한계가 있습니다.

## 목표
LLM을 활용하여 증권사 애널리스트보다 더 수준 높고 정확한 글로벌 매크로 인사이트를 생성하고자 합니다.

## 사용 가능한 무료/저비용 API
1. **FRED API** (미국 연준): 500,000+ 경제지표 시계열 (GDP, CPI, 실업률, 금리 등)
2. **Alpha Vantage**: 주식/FX/크립토, 60+ 기술/경제지표, 뉴스 + 감성분석
3. **Finnhub**: 실시간 시장 데이터, 회사 펀더멘털, 경제 캘린더, 뉴스
4. **Marketaux**: 80개 시장, 5000+ 뉴스 소스, 무료 플랜
5. **Financial Modeling Prep (FMP)**: GDP, 실업률, 인플레이션, 국채 수익률

## 질문
1. **데이터 소스 우선순위**: 한국 주식시장 매매를 위한 매크로 분석에 가장 중요한 데이터 소스는 무엇인가? 각 소스별 우선순위와 이유를 제시하라.

2. **수집 전략**: 어떤 주기(실시간/시간별/일별)로 어떤 데이터를 수집해야 하는가? 비용 대비 효과를 고려하여 제안하라.

3. **LLM 분석 파이프라인**: 수집된 데이터를 어떻게 LLM에게 전달하고 분석시켜야 가장 효과적인가? 프롬프트 구조, 분석 단계, 결과 형식을 제안하라.

4. **차별화 전략**: 증권사 애널리스트 대비 LLM 기반 분석의 장점을 극대화할 수 있는 방법은? (예: 멀티소스 실시간 통합, 편향 제거, 정량적 백테스트 등)

5. **구현 로드맵**: 현재 시스템(텔레그램 수집 → 3현자 분석)을 확장하여 위 기능을 추가하는 단계별 로드맵을 제시하라. 각 단계의 예상 작업량과 우선순위를 포함하라.

JSON 형식으로 구조화된 답변을 제공해 주세요.
- Target: None

# Final Plan

## 1. 승인된 범위 (Approved scope)
- LLM 기반 글로벌 매크로 인사이트 생성 시스템의 데이터 소스 선정, 수집 전략, LLM 분석 파이프라인 설계, 차별화 전략 및 구현 로드맵 검토. 한국 주식시장 매매를 위한 매크로 분석에 초점.

## 2. 실행 순서가 있는 액션 스텝 (Action Steps)
1. **API 비교 테이블 작성 및 우선순위 결정 (1주)**
   - 각 API의 특성과 제한 사항을 비교하고 우선순위를 결정합니다.
   - 한국 주식시장에 적합한 데이터 소스를 선정합니다.

2. **데이터 수집 파이프라인 구축 (2-3주)**
   - API 클라이언트 구현 및 데이터 검증 로직 추가.
   - 폴링 주기를 설정하여 요청 한도를 초과하지 않도록 합니다.

3. **LLM 분석 파이프라인 구축 (2주)**
   - LLM에 데이터 전달을 위한 프롬프트 설계 및 LLM 호출 로직 구현.
   - 분석 결과를 요약된 형태로 제공하고 출처를 명시합니다.

4. **결과 검증 및 피드백 (1주)**
   - 분석 결과를 검토하고 3현자 Council의 피드백을 통합합니다.

5. **정량적 평가 기준 정의**
   - LLM 분석 결과의 성과를 측정할 수 있는 구체적인 메트릭을 정의합니다.

6. **LLM 프롬프트 초기 설계 및 안전장치 마련**
   - LLM에게 명확한 지침을 포함한 초기 프롬프트를 설계하고, Council이 모든 출력을 검토하도록 합니다.

7. **비용 추적 대시보드 구현**
   - 초기 3개월 동안의 비용을 추적할 수 있는 대시보드를 구축합니다.

## 3. 실험 (Experiments) 및 수용 기준 (Acceptance criteria)
- **실험 1**: LLM은 다양한 매크로 데이터 소스를 통합하여 기존 애널리스트 브리핑보다 더 신선하고 깊이 있는 매크로 인사이트를 생성할 수 있다.
  - **수용 기준**: LLM 브리핑이 기존 텔레그램 브리핑 대비, 주요 매크로 이벤트 발생 후 1일 이내 한국 주식시장 방향성 예측 정확도 10%p 이상 개선.

- **실험 2**: LLM은 다양한 뉴스 소스에서 편향되지 않은 매크로 정서를 추출할 수 있다.
  - **수용 기준**: LLM이 식별한 시장 정서와 실제 데이터 간의 괴리가 발생한 경우, 해당 괴리가 3일 이내에 시장 가격 조정으로 이어진 사례의 60% 이상을 정확하게 포착.

## 4. 리스크 및 롤백 트리거 (Risk & rollback triggers)
- **리스크**
  - LLM 환각 및 잘못된 정보 생성: LLM이 존재하지 않는 사실을 만들어내거나 잘못된 매크로 인사이트를 제공할 경우.
  - 데이터 편향 및 불일치: 다양한 소스에서 수집된 데이터 간의 불일치가 발생할 경우.
  - API 요청 한도 초과: 무료 API의 요청 한도를 초과할 경우.
  - 비용 초과: 초기 3개월 동안 무료 API만 사용하지 않을 경우.

- **롤백 트리거**
  - LLM이 생성한 매크로 인사이트 중 10% 이상이 명백한 사실 오류를 포함하는 경우.
  - 3개월 연속으로 매매 기회 포착률 또는 수익률 기여도에서 유의미한 개선을 보이지 못할 경우.
  - 타임스탬프 검증 실패 비율이 5%를 초과하는 경우.

## Notes
- 제니의 지적 타당성 및 민지의 API 선택 우선순위에 대한 의견은 보존하였습니다.
- 각 단계에서 3현자 Council의 피드백을 적극적으로 반영하여 진행합니다.

---
## Appendix: Raw JSON Outputs
<details><summary>Click to expand</summary>

### Jennie
```json
{
  "text": "## Verdict\n- decision: approve_with_changes\n- confidence: 80\n- scope: LLM 기반 글로벌 매크로 인사이트 생성 시스템의 데이터 소스 선정, 수집 전략, LLM 분석 파이프라인 설계, 차별화 전략 및 구현 로드맵 검토. 한국 주식시장 매매를 위한 매크로 분석에 초점.\n\n## Key Findings (<=5)\n1.  **데이터 신선도 및 깊이의 한계 극복 잠재력**: 현재 텔레그램 기반 시스템의 정보 신선도와 깊이 한계를 제안된 API와 LLM 활용으로 크게 개선할 잠재력이 있습니다. 이는 결정적 순간을 포착하는 데 필수적인 요소입니다.\n2.  **LLM의 '환각(Hallucination)' 및 편향 위험**: LLM은 방대한 데이터를 통합하고 분석하는 데 강점이 있지만, 잘못된 정보 생성(hallucination)이나 학습 데이터에 내재된 편향을 반영할 위험이 높습니다. 이는 매크로 인사이트의 신뢰성을 심각하게 저해할 수 있는 핵심 리스크입니다.\n3.  **다중 데이터 소스 통합 및 신뢰성 검증의 중요성**: 다양한 무료/저비용 API를 활용할 경우, 각 소스의 데이터 업데이트 주기, 정확성, 그리고 상호 일관성을 엄격하게 검증해야 합니다. 특히 타임스탬프 신뢰성은 룩어헤드(미래 정보) 방어 로직과 직결되므로 최우선적으로 확보되어야 합니다.\n4.  **LLM 기반 인사이트의 정량적 검증 부재**: \"더 수준 높고 정확한\" 인사이트를 목표로 하지만, 이를 어떻게 정량적으로 측정하고 검증할지에 대한 구체적인 계획이 부족합니다. LLM 기반 시스템의 실제 가치를 입증하고 개선 방향을 설정하기 위한 검증 가능한 가설과 실험 설계가 필수적입니다.\n5.  **과도한 필터링/임계치 설정 위험**: LLM이 생성하는 방대한 정보 속에서 핵심 신호를 추출하기 위해 과도한 필터링이나 임계치를 적용할 경우, 중요한 매크로 변화를 놓치거나 시장 국면 분류 오류를 유발할 수 있습니다.\n\n## Evidence\n- references:\n    - Current system: Telegram channel @hedgecat0301 (키움 한지영) - 언급된 \"하루에 한 번\" 및 \"정보의 깊이에 한계\"는 데이터 신선도 및 범위의 제약을 시사합니다.\n    - Proposed APIs: FRED API, Alpha Vantage, Finnhub, Marketaux, Financial Modeling Prep (FMP) - 다양한 시계열 데이터, 시장 데이터, 뉴스 및 감성 분석을 제공하여 기존 시스템의 한계를 보완할 잠재력을 가집니다.\n- missing_data:\n    - **LLM 분석 결과의 정량적 평가 기준**: \"수준 높고 정확한\" 인사이트를 판단할 구체적인 메트릭(예: 특정 매크로 이벤트에 대한 시장 반응 예측 정확도, 기존 애널리스트 대비 정보 우위 지표, 매매 기회 포착률 기여도)이 필요합니다. 이는 LLM의 성능 개선 방향을 설정하고, 시스템의 실제 가치를 입증하는 데 결정적입니다.\n    - **기존 3현자 Council의 분석 프로세스 상세**: 현재 3현자 Council이 텔레그램 브리핑을 어떻게 분석하고 어떤 의사결정을 내리는지에 대한 상세 프로세스와 성공/실패 사례가 있다면, LLM 분석 파이프라인 설계 시 벤치마크 및 학습 데이터로 활용할 수 있습니다.\n    - **각 API의 실제 데이터 업데이트 주기 및 지연 시간**: 제안된 API들이 \"실시간\" 또는 \"시간별\"이라고 주장하지만, 실제 데이터 수집 시 발생하는 지연 시간(latency)과 업데이트 빈도를 정확히 파악해야 합니다. 이는 데이터 신선도 및 룩어헤드 방어 로직 설계에 필수적입니다.\n\n## Risks & Veto Triggers\n- risks:\n    - **LLM 환각(Hallucination) 및 잘못된 정보 생성**: LLM이 존재하지 않는 사실을 만들어내거나, 데이터를 오해석하여 잘못된 매크로 인사이트를 제공할 경우, 치명적인 거래 결정으로 이어질 수 있습니다. 이는 자동매매 시스템의 보수적 리스크 관점과 정면으로 배치됩니다.\n    - **데이터 편향 및 불일치**: 다양한 소스에서 수집된 데이터 간의 불일치, 또는 LLM 학습 데이터에 내재된 편향이 매크로 분석에 반영될 경우, 시장 국면 분류 오류나 잘못된 기회 포착으로 이어질 수 있습니다.\n    - **과도한 정보 과부하 및 노이즈**: LLM이 생성하는 방대한 정보 속에서 실제 유의미한 신호를 식별하지 못하고 노이즈에 압도될 위험이 있습니다. 이는 중요한 매크로 변화를 놓치게 할 수 있습니다.\n    - **비용 대비 효과 불확실성**: 무료/저비용 API라고는 하나, LLM 운영 비용과 데이터 처리 비용을 고려할 때, 실제 매매 성과 개선으로 이어지지 않는다면 자원 낭비가 될 수 있습니다.\n- veto_if:\n    - LLM이 생성한 매크로 인사이트 중 10% 이상이 명백한 사실 오류(hallucination)를 포함하는 것으로 검증될 경우.\n    - LLM 기반 시스템이 기존 3현자 Council의 분석 대비, 최소 3개월 연속으로 매매 기회 포착률 또는 수익률 기여도에서 유의미한 개선을 보이지 못할 경우.\n    - 핵심 매크로 지표의 타임스탬프 신뢰성 문제가 지속적으로 발생하여 룩어헤드 방어 로직을 무력화할 위험이 발견될 경우.\n\n## Recommendations\n- immediate_actions:\n    1.  **핵심 데이터 소스 우선 통합 및 검증**: FRED (글로벌 매크로 지표), Finnhub (실시간 시장 데이터, 경제 캘린더, 뉴스), Alpha Vantage (주식/FX/크립토, 뉴스+감성분석)의 핵심 데이터를 우선적으로 통합하고, 각 데이터 포인트의 타임스탬프 신뢰성 및 업데이트 주기를 엄격하게 검증하는 파이프라인을 구축하세요. 데이터 신선도와 무결성 확보가 최우선입니다.\n    2.  **LLM 프롬프트 초기 설계 및 안전장치 마련**: LLM에게 \"객관적인 매크로 분석가\" 역할을 부여하고, \"사실에 기반한 분석만 수행하고, 추측성 발언을 피하며, 모든 주장은 근거 데이터와 함께 제시하라\"는 명확한 지침을 포함한 초기 프롬프트를 설계하세요. 초기 단계에서는 3현자 Council이 LLM의 모든 출력을 검토하고 피드백을 제공하는 안전장치를 마련해야 합니다.\n    3.  **LLM 분석 결과의 정량적 평가 기준 정의**: \"수준 높고 정확한\" 인사이트를 측정할 수 있는 구체적인 메트릭(예: 특정 경제 지표 발표 후 한국 주식시장(KOSPI/KOSDAQ) 방향성 예측 정확도, 주요 매크로 이벤트에 대한 LLM의 선행/동행 분석 능력)을 정의하고, 이를 기반으로 초기 실험의 성공 기준을 설정하세요.\n- experiments:\n    1.  **Hypothesis**: LLM은 다양한 매크로 데이터 소스를 통합하여 기존 애널리스트 브리핑보다 더 신선하고 깊이 있는 매크로 인사이트를 생성할 수 있으며, 이는 한국 주식시장의 주요 매크로 이벤트에 대한 예측 정확도를 향상시킬 것이다.\n        - **Method**:\n            1.  FRED, Finnhub, Alpha Vantage에서 주요 글로벌 및 한국 관련 매크로 지표(GDP, CPI, 금리, 환율, 주요 기업 실적 발표, 뉴스 헤드라인 등)를 실시간/일별로 수집합니다.\n            2.  LLM에 이 데이터를 입력하고, \"한국 주식시장에 영향을 미칠 수 있는 글로벌 매크로 트렌드 분석 및 주요 이벤트 요약\" 프롬프트를 사용하여 일일 브리핑을 생성합니다.\n            3.  생성된 LLM 브리핑과 기존 텔레그램 브리핑을 3현자 Council에 동시에 제공하고, 각 브리핑이 특정 매크로 이벤트(예: FOMC 발표, 한국은행 금리 결정, 주요 경제 지표 발표)에 대한 시장 반응을 얼마나 정확하게 예측했는지 평가하도록 합니다.\n        - **Success Metrics**:\n            - LLM 브리핑이 기존 텔레그램 브리핑 대비, 주요 매크로 이벤트 발생 후 1일 이내 한국 주식시장(KOSPI/KOSDAQ) 방향성 예측 정확도 10%p 이상 개선.\n            - 3현자 Council의 LLM 브리핑에 대한 \"정보의 신선도\" 및 \"분석의 깊이\" 만족도 평균 4점/5점 이상 (Likert 척도).\n            - LLM 브리핑에서 발견되는 명백한 사실 오류(hallucination) 비율 1% 미만 유지.\n    2.  **Hypothesis**: LLM은 다양한 뉴스 소스에서 편향되지 않은 매크로 정서(sentiment)를 추출하고, 이를 통해 시장의 과도한 반응 또는 저평가된 기회를 식별할 수 있다.\n        - **Method**:\n            1.  Alpha Vantage 및 Marketaux에서 수집된 뉴스 데이터를 LLM에 입력하고, \"특정 매크로 이벤트(예: 인플레이션 지표 발표)에 대한 시장의 전반적인 정서(긍정/부정/중립) 및 주요 논점 요약\" 프롬프트를 사용합니다.\n            2.  LLM이 추출한 정서와 실제 시장 반응(예: 관련 섹터/종목의 주가 변동)을 비교 분석합니다.\n            3.  특히, LLM이 \"시장 정서와 실제 데이터 간의 괴리\"를 식별하는 능력을 평가합니다.\n        - **Success Metrics**:\n            - LLM이 식별한 \"시장 정서와 실제 데이터 간의 괴리\"가 발생한 경우, 해당 괴리가 3일 이내에 시장 가격 조정으로 이어진 사례의 60% 이상을 정확하게 포착.\n            - LLM이 생성한 정서 분석 보고서에서 특정 언론사의 편향이 반영된 것으로 판단되는 사례 비율 5% 미만.\n- if_code_change_needed:\n    - **Data Ingestion Module**: 각 API별 데이터 수집 및 정규화 로직 구현. 타임스탬프 검증 및 데이터 무결성 체크 기능 포함.\n    - **LLM Orchestration Module**: API 데이터 전처리, 프롬프트 구성, LLM 호출, 응답 파싱 및 구조화 로직 구현.\n    - **Validation & Monitoring Module**: LLM 출력의 사실 오류 감지, 메트릭 계산, 3현자 Council 피드백 통합 로직 구현.\n\n## Questions to the User\n- 현재 3현자 Council이 텔레그램 브리핑 외에 추가적으로 참고하는 정보원이나 분석 도구가 있다면 무엇이며, 그 이유는 무엇입니까?\n- LLM이 생성할 매크로 인사이트의 최종 소비자는 누구이며, 그들이 가장 중요하게 생각하는 정보의 형태(예: 요약, 특정 종목 영향, 리스크 요인)는 무엇입니까?\n- LLM 기반 시스템 도입 시, 기존 3현자 Council의 역할은 어떻게 변화하기를 기대하십니까? (예: 검증자, 추가 분석 요청자, 최종 의사결정자)",
  "decision": "neutral",
  "raw_output": true
}
```
### Minji
```json
{
  "text": "# Council Output: Minji의 구현 검토 및 권고\n\n## Verdict\n- decision: **approve_with_changes**\n- confidence: **75**\n- scope: LLM 기반 매크로 인사이트 시스템의 **단계적 파일럿 구현** (3개월). 데이터 수집 → 검증 → LLM 분석 → 정량적 평가의 최소 범위 MVP 구축. 실거래 트리거 변경 제외.\n\n---\n\n## Key Findings\n\n1. **Jennie의 지적 타당성**: LLM 환각, 데이터 신뢰성, 정량적 검증 부재는 **구현 전 반드시 해결해야 할 핵심 리스크**입니다. 특히 타임스탬프 검증과 사실 오류 감지는 코드 레벨에서 강제되어야 합니다.\n\n2. **API 선택의 우선순위 불명확**: 5개 API 모두 \"무료\"라고 하지만, 실제 요청 한도(rate limit), 데이터 지연(latency), 한국 시장 커버리지가 상이합니다. **구체적인 비교 테이블 없이 구현 시작 불가**.\n\n3. **\"정량적 평가 기준 부재\" 문제는 코드로 해결 불가**: 이는 비즈니스/분석 정책 결정입니다. 하지만 **측정 가능한 로그/메트릭 구조는 코드에서 강제**할 수 있습니다.\n\n4. **기존 3현자 Council 프로세스 미상**: 현재 텔레그램 브리핑을 \"어떻게\" 분석하는지 알아야, LLM 출력을 \"어떤 형식으로\" 제공할지 결정할 수 있습니다.\n\n5. **\"실시간\" 수집의 비용 함정**: 무료 API의 실시간 폴링은 요청 한도 초과 → 유료 전환의 전형적 경로입니다. **초기 설계에서 폴링 주기를 명시적으로 제한**해야 합니다.\n\n---\n\n## Evidence\n\n### References\n- **Jennie의 veto_if 조건**:\n  - LLM 사실 오류 10% 이상 → 즉시 중단\n  - 3개월 연속 성과 미달 → 롤백\n  - 타임스탬프 신뢰성 문제 → 룩어헤드 방어 무력화\n  \n- **제시된 API 문서 (공개 정보)**:\n  - FRED: 일일 업데이트, 미국 경제지표만 (한국 데이터 없음)\n  - Alpha Vantage: 무료 플랜 5 req/min (매우 제한적)\n  - Finnhub: 무료 플랜 60 req/min, 경제 캘린더 지연 1-2시간\n  - Marketaux: 무료 플랜 100 req/day (일일 수집 전용)\n  - FMP: 무료 플랜 250 req/day (제한적)\n\n### Missing Data\n- **현재 3현자 Council의 분석 프로세스**: 텔레그램 브리핑을 받은 후, 어떤 의사결정 로직을 거치는가? (예: 특정 지표 임계치 확인 → 섹터 할당 → 매매 신호 생성)\n- **한국 시장 특화 데이터 소스**: FRED/FMP는 미국 중심. 한국은행 금리, KOSPI 선물, 환율(KRW/USD) 등은 어디서 수집할 것인가?\n- **기존 시스템의 성과 메트릭**: 현재 텔레그램 브리핑이 얼마나 정확한가? (예: 월별 매매 수익률, 신호 포착률)\n- **LLM 모델 선택**: GPT-4, Claude, 오픈소스(Llama)? 각 모델의 비용/성능/환각 비율이 다릅니다.\n\n---\n\n## Risks & Veto Triggers\n\n### Risks (구현 단계별)\n\n| 리스크 | 심각도 | 완화 방안 |\n|--------|--------|----------|\n| **LLM 환각 (Hallucination)** | 🔴 Critical | 모든 LLM 출력에 \"근거 데이터 소스 + 타임스탬프\" 강제 첨부; 사실 오류 감지 로직 (정규식/키워드 매칭) 구현 |\n| **API 요청 한도 초과** | 🟠 High | 폴링 주기를 **일일 1회(오전 8시)** 로 고정; 요청 카운터 로깅 필수 |\n| **데이터 타임스탬프 신뢰성** | 🟠 High | 각 API별 \"데이터 발행 시간\" vs \"수집 시간\" 차이 기록; 24시간 이상 지연 데이터는 자동 필터링 |\n| **LLM 분석 결과의 편향** | 🟡 Medium | 프롬프트에 \"다양한 관점 제시\" 강제; 동일 데이터에 대해 2회 이상 LLM 호출 후 일관성 검증 |\n| **기존 3현자 Council과의 충돌** | 🟡 Medium | LLM 출력을 \"참고 자료\"로만 제공; 최종 의사결정은 여전히 Council이 담당 |\n| **비용 초과** | 🟡 Medium | 초기 3개월은 무료 API만 사용; 월별 비용 추적 대시보드 구현 |\n\n### Veto Triggers (Jennie 기준 + Minji 추가)\n\n1. **LLM 사실 오류 비율 > 10%** (3주 연속 측정)\n   - 감지 방법: 3현자 Council이 주 1회 LLM 출력 샘플 검토 → 오류 비율 기록\n   - 롤백: 즉시 LLM 프롬프트 재설계 또는 모델 변경\n\n2. **타임스탐프 검증 실패 > 5%** (월별)\n   - 감지 방법: 자동 로그 분석 (24시간 이상 지연 데이터 비율)\n   - 롤백: 해당 API 제외 또는 수집 주기 변경\n\n3. **3개월 후 정량적 성과 미달**\n   - 성과 기준: Jennie 권고의 \"주요 매크로 이벤트 예측 정확도 10%p 개선\" 미달\n   - 롤백: 파일럿 종료, 기존 시스템 복귀\n\n---\n\n## Recommendations\n\n### Immediate Actions (구현 순서)\n\n#### 1️⃣ **API 비교 테이블 작성 및 우선순위 결정** (1주)\n**담당**: 데이터 엔지니어 + 3현자 Council\n\n```\nAPI별 비교 (한국 주식시장 매크로 분석 기준):\n\n┌─────────────┬──────────────┬──────────────┬──────────────┬──────────────┐\n│ API         │ 한국 데이터  │ 요청 한도    │ 지연시간     │ 우선순위     │\n├─────────────┼──────────────┼──────────────┼──────────────┼──────────────┤\n│ FRED        │ ❌ 없음      │ 120/min      │ 일일 업데이트│ 3순위        │\n│ Alpha Van.  │ ⚠️ 제한적    │ 5/min        │ 15-30분      │ 4순위        │\n│ Finnhub     │ ✅ 있음      │ 60/min       │ 1-2시간      │ 1순위        │\n│ Marketaux   │ ✅ 있음      │ 100/day      │ 실시간       │ 2순위        │\n│ FMP         │ ⚠️ 제한적    │ 250/day      │ 일일 업데이트│ 3순위        │\n└─────────────┴──────────────┴──────────────┴──────────────┴──────────────┘\n\n추가 필요 소스:\n- 한국은행 API (기준금리, 통화량) → 공식 제공 여부 확인\n- KOSPI/KOSDAQ 선물 데이터 → 증권사 API 또는 공개 데이터 소스 확인\n- KRW/USD 환율 → Finnhub 또는 FRED (환율 시계열)\n```\n\n**산출물**: 최종 우선순위 결정 + 각 API별 수집 주기 명시\n\n---\n\n#### 2️⃣ **데이터 수집 파이프라인 구축 (최소 범위)** (2-3주)\n\n**파일 구조** (예상):\n```\nproject/\n├── src/\n│   ├── data_ingestion/\n│   │   ├── __init__.py\n│   │   ├── api_clients.py          # 각 API별 클라이언트 (Finnhub, Marketaux 등)\n│   │   ├── data_validator.py       # 타임스탬프 검증, 데이터 무결성 체크\n│   │   └── scheduler.py            # 폴링 스케줄 (일일 1회, 오전 8시)\n│   ├── llm_pipeline/\n│   │   ├── __init__.py\n│   │   ├── prompt_builder.py       # 프롬프트 구성\n│   │   ├── llm_client.py           # LLM 호출 (OpenAI API 또는 오픈소스)\n│   │   └── output_parser.py        # 응답 파싱 + 구조화\n│   ├── validation/\n│   │   ├── __init__.py\n│   │   ├── hallucination_detector.py # 사실 오류 감지\n│   │   └── metrics.py              # 성과 메트릭 계산\n│   └── config/\n│       ├── api_keys.env            # API 키 (Git 제외)\n│       └── settings.yaml           # 폴링 주기, 임계치 등\n├── tests/\n│   ├── test_api_clients.py\n│   ├── test_data_validator.py\n│   └── test_llm_pipeline.py\n├── logs/\n│   └── data_collection.log         # 모든 API 호출 기록\n└── README.md\n```\n\n**핵심 구현 항목**:\n\n##### 2-1. `api_clients.py` (데이터 수집)\n```python\n# 예시 구조 (실제 구현은 각 API 문서 참고)\n\nclass FinnhubClient:\n    \"\"\"Finnhub API 클라이언트\"\"\"\n    def __init__(self, api_key: str):\n        self.api_key = api_key\n        self.base_url = \"https://finnhub.io/api/v1\"\n        self.rate_limit = 60  # requests/min\n        \n    def get_economic_calendar(self, country: str = \"KR\") -> dict:\n        \"\"\"경제 캘린더 수집 (한국 경제 지표)\"\"\"\n        # 반환: {\"event\": \"...\", \"date\": \"2024-01-15T10:00:00Z\", \"actual\": 3.2, ...}\n        pass\n    \n    def get_news(self, query: str = \"KOSPI macro\") -> list:\n        \"\"\"뉴스 수집\"\"\"\n        # 반환: [{\"headline\": \"...\", \"source\": \"...\", \"timestamp\": \"...\", ...}]\n        pass\n\nclass MarketauxClient:\n    \"\"\"Marketaux API 클라이언트\"\"\"\n    def __init__(self, api_key: str):\n        self.api_key = api_key\n        self.daily_limit = 100  # requests/day\n        \n    def get_news_sentiment(self, query: str) -> list:\n        \"\"\"뉴스 + 감성분석\"\"\"\n        # 반환: [{\"title\": \"...\", \"sentiment\": \"positive\", \"score\": 0.85, ...}]\n        pass\n\nclass DataCollector:\n    \"\"\"통합 데이터 수집기\"\"\"\n    def __init__(self, finnhub_client, marketaux_client):\n        self.finnhub = finnhub_client\n        self.marketaux = marketaux_client\n        self.logger = setup_logger(\"data_collection\")\n        \n    def collect_daily(self) -> dict:\n        \"\"\"일일 데이터 수집 (오전 8시 실행)\"\"\"\n        data = {\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"economic_calendar\": self.finnhub.get_economic_calendar(),\n            \"news\": self.marketaux.get_news_sentiment(\"KOSPI macro\"),\n            \"metadata\": {\n                \"sources\": [\"Finnhub\", \"Marketaux\"],\n                \"collection_time\": datetime.utcnow().isoformat(),\n            }\n        }\n        self.logger.info(f\"Collected {len(data['news'])} news items\")\n        return data\n```\n\n##### 2-2. `data_validator.py` (타임스탬프 검증)\n```python\nclass DataValidator:\n    \"\"\"데이터 신뢰성 검증\"\"\"\n    \n    @staticmethod\n    def validate_timestamp(data_timestamp: str, collection_time: str, \n                          max_delay_hours: int = 24) -> bool:\n        \"\"\"\n        데이터 발행 시간과 수집 시간의 차이 검증\n        - max_delay_hours: 최대 허용 지연 시간 (기본 24시간)\n        - 반환: True (유효) / False (무효)\n        \"\"\"\n        data_dt = datetime.fromisoformat(data_timestamp)\n        collect_dt = datetime.fromisoformat(collection_time)\n        delay = (collect_dt -",
  "error": "JSON Parse Failed: Expecting property name enclosed in double quotes: line 1 column 65 (char 64)",
  "raw_json_snippet": "{\"event\": \"...\", \"date\": \"2024-01-15T10:00:00Z\", \"actual\": 3.2, ...}\n        pass\n    \n    def get_news(self, query: str = \"KOSPI macro\") -> list:\n        \"\"\"뉴스 수집\"\"\"\n        # 반환: [{\"headline\": \"...\""
}
```
### Junho
```json
{
  "data_source_priority": [
    {
      "source": "Finnhub",
      "priority": 1,
      "reason": "실시간 시장 데이터와 경제 캘린더를 제공하여 한국 주식시장에 즉각적인 영향을 미치는 정보를 신속하게 수집할 수 있습니다."
    },
    {
      "source": "Alpha Vantage",
      "priority": 2,
      "reason": "주식 및 FX 데이터와 함께 감성 분석을 제공하여 시장의 정서적 반응을 이해하는 데 유용합니다."
    },
    {
      "source": "Marketaux",
      "priority": 3,
      "reason": "다양한 뉴스 소스를 통해 시장의 최신 동향을 파악할 수 있으며, 무료 플랜으로도 충분한 데이터 수집이 가능합니다."
    },
    {
      "source": "FRED API",
      "priority": 4,
      "reason": "미국 경제 지표를 통해 글로벌 매크로 트렌드를 이해하는 데 필수적이나, 한국 시장에 대한 직접적인 데이터는 부족합니다."
    },
    {
      "source": "Financial Modeling Prep (FMP)",
      "priority": 5,
      "reason": "기본적인 경제 지표를 제공하지만, 한국 시장에 대한 정보가 제한적입니다."
    }
  ],
  "collection_strategy": {
    "frequency": "daily",
    "data_types": [
      {
        "type": "economic_calendar",
        "source": "Finnhub",
        "description": "한국 경제 지표 발표 일정"
      },
      {
        "type": "market_data",
        "source": "Finnhub",
        "description": "실시간 주식 및 FX 데이터"
      },
      {
        "type": "news_sentiment",
        "source": "Marketaux",
        "description": "주요 뉴스의 감성 분석"
      }
    ],
    "cost_effectiveness": "일일 수집 주기를 설정하여 데이터 요청 한도를 초과하지 않도록 하며, 무료 API를 최대한 활용하여 비용을 절감합니다."
  },
  "llm_analysis_pipeline": {
    "data_delivery": "수집된 데이터를 JSON 형식으로 LLM에 전달합니다.",
    "prompt_structure": {
      "introduction": "다음 데이터를 기반으로 한국 주식시장에 대한 매크로 인사이트를 생성하라.",
      "data_input": "수집된 경제 지표 및 뉴스 데이터",
      "analysis_request": "이 데이터가 한국 주식시장에 미치는 영향을 분석하고, 주요 매크로 이벤트를 요약하라."
    },
    "analysis_steps": [
      "데이터 수집",
      "LLM에 데이터 전달",
      "LLM 분석 수행",
      "결과 수집 및 정리"
    ],
    "result_format": "분석 결과는 요약된 형태로 제공하며, 각 인사이트에 대한 출처와 함께 명시합니다."
  },
  "differentiation_strategy": [
    "다양한 데이터 소스를 통합하여 실시간으로 시장 변화를 반영",
    "LLM의 분석 결과에 대해 다양한 관점을 제시하여 편향을 제거",
    "정량적 백테스트를 통해 LLM의 성과를 지속적으로 검증하고 개선"
  ],
  "implementation_roadmap": [
    {
      "phase": "API 비교 및 우선순위 결정",
      "tasks": [
        "각 API의 특성과 제한 사항을 비교",
        "우선순위 결정 및 수집 주기 명시"
      ],
      "estimated_effort": "1주",
      "priority": "높음"
    },
    {
      "phase": "데이터 수집 파이프라인 구축",
      "tasks": [
        "API 클라이언트 구현",
        "데이터 검증 로직 추가",
        "폴링 스케줄 설정"
      ],
      "estimated_effort": "2-3주",
      "priority": "높음"
    },
    {
      "phase": "LLM 분석 파이프라인 구축",
      "tasks": [
        "프롬프트 설계",
        "LLM 호출 및 응답 처리 로직 구현"
      ],
      "estimated_effort": "2주",
      "priority": "중간"
    },
    {
      "phase": "결과 검증 및 피드백",
      "tasks": [
        "분석 결과 검토",
        "3현자 Council의 피드백 통합"
      ],
      "estimated_effort": "1주",
      "priority": "중간"
    }
  ]
}
```

</details>

---
## Cost Summary
| Model | Input | Output | Cost (USD) |
|-------|-------|--------|------------|
| Jennie (Gemini) | 0 | 0 | $0.0000 |
| Minji (Claude) | 2,668 | 2,282 | $0.2112 |
| Junho (OpenAI) | 5,196 | 907 | $0.0013 |
| Orchestrator (OpenAI) | 5,250 | 574 | $0.0011 |
| **Total** | - | - | **$0.2136** (≈310원) |
