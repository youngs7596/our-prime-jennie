# Prime Council Report
- Date: 2026-01-23 14:05:10
- Query: Should we implement Sector/Theme Momentum Scoring in Scout? How can we identify hot themes dynamically?
- Target: reports/council_consultation_sector_theme.md

# Final Plan: Scout 시스템에 섹터/테마 모멘텀 요소 도입

## 1) 승인된 범위 (Approved scope)
- Scout 시스템에 섹터/테마 모멘텀 요소를 도입하되, 초기 단계에서는 페널티 로직에 집중하고, 부스트 로직은 추가 검증 후 도입합니다.

## 2) 실행 순서가 있는 액션 스텝 (Action Steps)
1. **\"핫\" 섹터 정의 재검토 (1주일 내)**  
   - 절대 수익률 대신 상대적 강도 및 추세 지속성을 고려한 새로운 정의 수립.
   - 부스트 조건: 상대적 강도 및 추세 지속성 기준 충족 시에만 적용.
   - 페널티 조건: 5일 수익률 < -3%일 경우 적용.

2. **페널티 로직 우선 구현 (2주일 내)**  
   - '낙폭 과대 섹터'에 대한 `-10` 페널티 로직을 먼저 적용하고 그 효과를 검증합니다.

3. **섹터 정의 및 데이터 소스 명확화 (1주일 내)**  
   - `config/sector_definitions.json` 생성 및 KSIC 기반 분류 문서화.
   - 각 섹터별 "top 5 market-cap" 종목 리스트 자동 업데이트 설정.

4. **상대적 강도 및 추세 지속성 백테스트 (3주일 내)**  
   - 과거 데이터에 대해 새로운 정의를 적용하여 백테스트를 실시하고 성과를 검증합니다.

5. **동적 테마/섹터 분류 연구 시작 (4주일 내)**  
   - 뉴스 기사, 소셜 미디어 트렌드 등을 활용하여 시장에서 부상하는 동적 테마를 식별하는 방법 연구.

6. **LLM 기반 동적 테마 클러스터링 실험 (5주일 내)**  
   - 뉴스 데이터 수집 및 LLM을 활용하여 신흥 테마를 식별하고, 기존 KSIC 섹터와 비교하여 신호 선행성 검증.

7. **페널티 로직 단독 검증 (2주일 내)**  
   - 페널티 로직만 적용해도 고점 매수 및 낙폭 과대 회피로 인해 Sharpe Ratio 개선 여부를 검증합니다.

## 3) 실험 (Experiments) 및 수용 기준 (Acceptance criteria)
1. **상대적 강도 + 추세 지속성 백테스트**  
   - **가설**: 새로운 정의를 통해 고점 매수 위험을 줄이면서 유의미한 섹터 모멘텀 신호를 포착할 수 있다.
   - **수용 기준**: Sharpe Ratio 5% 이상 개선, Max Drawdown 10% 이내 유지.

2. **동적 테마 클러스터링 실험**  
   - **가설**: LLM 기반 동적 클러스터링을 통해 새로운 기회를 더 빠르게 식별할 수 있다.
   - **수용 기준**: 동적 테마가 기존 정적 섹터보다 3회 이상 시장 움직임을 선행하여 식별.

3. **페널티 로직 단독 검증**  
   - **가설**: 부스트 없이 페널티 로직만 적용해도 Sharpe Ratio 3% 이상 개선될 수 있다.
   - **수용 기준**: 페널티 적용 후 3일 내 추가 손실 회피율 > 70%.

## 4) 리스크 및 롤백 트리거 (Risk & rollback triggers)
- **리스크**:
  - 고점 매수 위험: 절대 수익률 기반 임계값이 고점 매수 유도 가능성.
  - 잘못된 섹터 정의: 정적 분류가 시장 변화에 적시 대응하지 못할 위험.
  - 데이터 스파이크/노이즈에 취약: 단기 수익률 왜곡 가능성.

- **롤백 트리거**:
  - 백테스트에서 제안된 임계값이 일관되게 고점 매수 신호를 생성하고, 이후 유의미한 수익률 하락을 보인 경우.
  - 섹터 정의가 수동 관리되어 시장 변화에 대한 적시 업데이트가 불가능한 경우.

## Notes
- 제니와 민지의 의견은 반영하였으나, 준호의 결정을 우선하였습니다.

---
## Appendix: Raw JSON Outputs
<details><summary>Click to expand</summary>

### Jennie
```json
{
  "text": "## Verdict\n- decision: approve_with_changes\n- confidence: 70\n- scope: `Scout` 시스템에 섹터/테마 모멘텀 요소를 도입하는 핵심 아이디어는 승인합니다. 하지만 제안된 '핫' 섹터 정의 및 점수 부여 방식은 보수적 리스크 관점과 충돌하며, 상당한 수정과 검증이 필요합니다. 특히, 절대 수익률 기반의 단순 부스트 로직은 재고되어야 합니다.\n\n## Key Findings (<=5)\n1.  **고점 매수 위험**: 제안된 `+3% in 3일` 임계값은 이미 상당한 상승을 보인 섹터를 '핫'하다고 판단하게 하여, 추격 매수 후 조정에 취약하게 만들 수 있습니다. 이는 \"Conservative/Rebound\" 철학과 상충됩니다.\n2.  **상대적 강도 및 추세 미고려**: 섹터 모멘텀을 단순히 절대 수익률로만 판단하는 것은 시장 전체의 움직임이나 다른 섹터 대비 상대적 강도를 무시하여 잘못된 신호를 생성할 수 있습니다. 추세의 지속성 여부도 중요합니다.\n3.  **정적 섹터 정의의 한계**: \"20+ sectors\"가 정적인 KSIC 코드 기반이라면, 시장에서 빠르게 부상하는 새로운 테마(예: AI 반도체, 로봇)를 적시에 포착하기 어렵고, 이는 기회 손실로 이어질 수 있습니다.\n4.  **비대칭적 리스크-리턴**: '낙폭 과대 섹터'에 대한 페널티는 보수적 관점에 부합하지만, '핫 섹터'에 대한 부스트는 고점 매수 위험이 높아 리스크-리턴 균형이 맞지 않습니다.\n5.  **데이터 신선도 및 신뢰성**: \"top 5 market-cap stocks\"의 선정 기준과 업데이트 주기가 명확하지 않아, 섹터 대표성이 시간에 따라 약화될 수 있습니다.\n\n## Evidence\n- references:\n    - `reports/council_consultation_sector_theme.md`: \"Avg 3-day return of top 5 market-cap stocks in the sector.\"\n    - `reports/council_consultation_sector_theme.md`: \"If Sector Momentum > Threshold (e.g., +3% in 3 days): Apply +10 point boost\"\n    - `reports/council_consultation_sector_theme.md`: \"If Sector Momentum < Negative Threshold: Apply -10 penalty\"\n    - `services/buy-scanner`: (섹터 모멘텀 기능이 통합될 대상 모듈)\n- missing_data:\n    - `metrics/sector_momentum_distribution_historical.csv`: 과거 3일 수익률 +3% 이상을 기록한 섹터들이 이후 1일, 3일, 5일간 어떤 성과를 보였는지에 대한 분포 데이터가 있다면, 제안된 임계값의 '고점 매수' 위험을 정량적으로 평가할 수 있습니다.\n    - `config/sector_definitions.json`: 현재 시스템이 사용하는 섹터 분류 기준(예: KSIC 코드 매핑) 및 각 섹터에 포함되는 종목 리스트가 필요합니다. 이는 'top 5 market-cap stocks' 선정의 기반이 됩니다.\n    - `logs/scout_scoring_history.log`: 기존 `Scout` 시스템에서 고점 매수 또는 낙폭 과대 종목을 필터링하지 못해 발생한 손실 사례에 대한 로그가 있다면, 섹터 모멘텀 도입의 필요성을 더 명확히 할 수 있습니다.\n\n## Risks & Veto Triggers\n- risks:\n    - **고점 매수 (Buying at the Top)**: 제안된 `+3% in 3 days` 임계값은 이미 상당한 상승을 보인 섹터를 '핫'하다고 판단하게 하여, 추격 매수 후 조정에 취약하게 만들 수 있습니다. 이는 보수적 리스크 관점과 상충됩니다.\n    - **잘못된 섹터 분류/정의**: 정적이고 광범위한 섹터 분류는 시장의 미묘한 테마 변화나 신흥 산업을 포착하지 못하거나, 관련 없는 종목을 묶어 잘못된 신호를 생성할 수 있습니다.\n    - **데이터 스파이크/노이즈에 취약**: 단기 3일 수익률은 특정 이벤트나 노이즈에 의해 왜곡될 수 있으며, 이는 잘못된 부스트/페널티를 유발할 수 있습니다.\n    - **과도한 포트폴리오 집중**: 특정 '핫' 섹터에 대한 과도한 점수 부스트는 포트폴리오가 소수의 섹터에 집중되어 분산 효과를 저해할 위험이 있습니다.\n- veto_if:\n    - 섹터 모멘텀 지표가 과거 백테스트에서 일관되게 고점 매수 신호를 생성하고, 이후 유의미한 수익률 하락을 보인다는 증거가 발견될 경우.\n    - 섹터 정의 및 종목 매핑이 수동으로 관리되어 시장 변화에 대한 적시 업데이트가 불가능한 경우.\n    - 제안된 실험들이 '고점 매수' 위험을 완화하거나 '보수적/리바운드' 철학에 부합하는 대안을 찾지 못할 경우.\n\n## Recommendations\n- immediate_actions:\n    1.  **\"핫\" 섹터 정의 재검토**: 단순히 절대 수익률이 높은 섹터가 아닌, 상대적 강도(Relative Strength)와 추세 지속성(Trend Persistence)을 고려한 \"핫\" 섹터 정의를 수립합니다. 예를 들어, 시장 대비 초과 수익률 및 특정 이동평균선 상회 여부 등을 복합적으로 고려합니다.\n    2.  **페널티 로직 우선 적용**: `Scout`의 보수적 관점을 강화하기 위해, '낙폭 과대 섹터'에 대한 `-10` 페널티 로직을 먼저 구현하고 그 효과를 검증합니다. '부스트' 로직은 더 정교한 정의와 검증 후 도입을 고려합니다.\n    3.  **동적 테마/섹터 분류 연구 시작**: KSIC 코드와 같은 정적 분류 외에, 뉴스 기사, 소셜 미디어 트렌드, 기업 공시 등을 활용하여 시장에서 부상하는 동적 테마를 식별하는 방법을 연구합니다. (예: LLM 기반 테마 클러스터링)\n- experiments:\n    1.  **hypothesis**: 절대 수익률 기반의 섹터 모멘텀 부스트는 고점 매수 위험이 높으므로, 상대적 강도 및 추세 지속성 지표를 활용하면 더 안정적인 '핫' 섹터 식별이 가능하고, 이는 `Scout`의 장기 수익률에 긍정적인 영향을 미칠 것이다.\n        - **method**:\n            1.  **지표 개발**:\n                *   **상대적 강도 (Relative Strength)**: 섹터 3일 수익률 - KOSPI 3일 수익률.\n                *   **추세 지속성**: 섹터 5일 이동평균선이 20일 이동평균선을 상회하는지 여부.\n                *   **복합 지표**: (상대적 강도 > X%) AND (추세 지속성 = True)\n            2.  **백테스트**: 과거 데이터에 대해 제안된 복합 지표를 사용하여 섹터 부스트를 적용했을 때의 `Scout` 시스템의 가상 포트폴리오 성과를 시뮬레이션합니다.\n        - **success_metrics**:\n            *   기존 `Scout` 대비 백테스트 기간 동안의 샤프 비율(Sharpe Ratio) 5% 이상 개선.\n            *   최대 낙폭(Max Drawdown) 10% 이내 유지.\n            *   '핫' 섹터로 분류된 종목들의 5일 후 평균 수익률이 시장 평균 대비 2% 이상 초과.\n    2.  **hypothesis**: 정적 섹터 분류(KSIC)는 시장의 동적 테마를 포착하는 데 한계가 있으므로, LLM 기반의 동적 테마 클러스터링을 도입하면 `Scout`가 새로운 기회를 더 빠르게 식별할 수 있을 것이다.\n        - **method**:\n            1.  **데이터 수집**: 주요 뉴스 헤드라인, 기업 공시, 애널리스트 리포트 등 텍스트 데이터를 수집합니다.\n            2.  **LLM 기반 클러스터링**: 수집된 텍스트 데이터를 LLM에 입력하여 유사한 테마를 가진 종목들을 동적으로 클러스터링합니다. (예: \"AI 반도체\", \"로봇 자동화\", \"전기차 충전 인프라\" 등)\n            3.  **테마 모멘텀 계산**: 각 동적 테마 클러스터 내 종목들의 평균 수익률을 계산하여 '테마 모멘텀' 지표를 생성합니다.\n        - **success_metrics**:\n            *   동적 테마 클러스터가 기존 정적 섹터 분류로는 포착하기 어려운 유의미한 시장 움직임을 3회 이상 선행하여 식별.\n            *   동적 테마 모멘텀을 적용한 `Scout`의 백테스트 결과에서 새로운 고성장 테마에 대한 포착률 15% 이상 증가.\n- if_code_change_needed:\n    - `services/buy-scanner/sector_momentum_calculator.py`: 섹터 모멘텀 계산 로직을 분리하여 구현. 초기에는 제안된 상대적 강도 및 추세 지속성 지표를 포함.\n    - `config/sector_definitions.json`: 섹터 정의 및 종목 매핑을 관리하는 설정 파일. 초기에는 KSIC 기반으로 시작하되, 동적 테마 연구 결과를 반영할 수 있도록 확장성 고려.\n    - `services/buy-scanner/scoring_rules.py`: 섹터 모멘텀 점수 부스트/페널티 적용 로직 추가.\n\n## Questions to the User\n- 현재 `Scout` 시스템에서 '고점 매수' 또는 '낙폭 과대'로 인해 발생한 구체적인 손실 사례나 놓친 기회에 대한 데이터가 있습니까? 있다면 섹터 모멘텀 도입의 우선순위와 방향을 설정하는 데 큰 도움이 될 것입니다.\n- \"20+ sectors\"는 어떤 기준으로 정의되어 있으며, 이 섹터 분류는 얼마나 자주 업데이트됩니까? 정적 분류인가요, 아니면 특정 로직에 따라 동적으로 변경될 수 있나요?\n- `Scout` 시스템의 전반적인 목표 수익률 및 최대 허용 낙폭은 어느 정도로 설정되어 있습니까? 이는 섹터 모멘텀 도입 시의 리스크 허용 범위를 결정하는 데 중요합니다.",
  "decision": "neutral",
  "raw_output": true
}
```
### Minji
```json
{
  "text": "# Council Output: Sector/Theme Momentum Scoring Review\n\n## Verdict\n- **decision**: `approve_with_changes`\n- **confidence**: 72\n- **scope**: Scout 시스템에 섹터/테마 모멘텀 요소를 도입하되, Jennie의 지적사항(고점 매수 위험, 상대적 강도 미고려, 정적 정의의 한계)을 반영하여 단계적으로 구현. 초기 단계는 **페널티 로직(낙폭 과대 섹터 회피)**에 집중하고, 부스트 로직은 추가 검증 후 도입.\n\n---\n\n## Key Findings (<=5)\n\n1. **Jennie의 고점 매수 우려는 타당함**: 절대 수익률 기반 `+3% in 3일` 임계값은 이미 상승한 섹터를 추격 매수하게 하여, 보수적/리바운드 철학과 충돌. 상대적 강도(Relative Strength) 지표로 재정의 필요.\n\n2. **정적 섹터 분류의 기회 손실**: KSIC 기반 \"20+ sectors\"는 AI 반도체, 로봇 등 신흥 테마를 적시에 포착하지 못함. 동적 테마 식별 메커니즘 병행 필수.\n\n3. **리스크-리턴 비대칭**: 페널티(`-10`)는 보수적 관점에 부합하지만, 부스트(`+10`)는 고점 매수 위험이 높아 균형이 맞지 않음. 페널티 우선 검증 후 부스트 도입 권장.\n\n4. **데이터 신선도 문제**: \"top 5 market-cap stocks\" 선정 기준과 업데이트 주기가 명확하지 않으면, 섹터 대표성이 시간에 따라 약화될 수 있음.\n\n5. **백테스트 증거 부재**: 과거 데이터에서 제안된 임계값이 실제로 고점 매수를 유발했는지, 또는 수익성이 있었는지에 대한 정량적 검증이 없음.\n\n---\n\n## Evidence\n\n**references:**\n- `reports/council_consultation_sector_theme.md`: 제안된 `+3% in 3 days` 임계값, `+10/-10` 점수 부스트/페널티\n- Jennie's Findings: 상대적 강도, 추세 지속성, 동적 테마 클러스터링 제안\n- `services/buy-scanner`: 현재 개별 종목 기반 스코어링만 존재 (섹터 요소 없음)\n\n**missing_data:**\n- `metrics/sector_momentum_backtest_results.csv`: 과거 3년간 `+3% in 3일` 섹터의 이후 1/3/5일 수익률 분포\n- `config/sector_definitions.json`: 현재 섹터 분류 기준 및 종목 매핑 (KSIC 코드 여부 확인)\n- `logs/scout_loss_cases.log`: 고점 매수 또는 낙폭 과대로 인한 구체적 손실 사례\n- `data/market_themes_dynamic.json`: 최근 6개월간 시장에서 부상한 신흥 테마 리스트 (AI, 로봇, 전기차 충전 등)\n\n---\n\n## Risks & Veto Triggers\n\n**risks:**\n- **고점 매수 (Buying at the Top)**: 절대 수익률 기반 임계값은 이미 상승한 섹터를 '핫'하다고 판단 → 추격 매수 후 조정에 취약\n- **섹터 정의 부실**: 정적 분류는 시장의 미묘한 테마 변화를 포착하지 못함 → 기회 손실 또는 잘못된 신호\n- **단기 노이즈에 취약**: 3일 수익률은 특정 이벤트나 스파이크에 왜곡될 수 있음\n- **포트폴리오 집중 위험**: 과도한 부스트는 소수 섹터에 집중 → 분산 효과 저해\n- **구현 복잡도**: 섹터 정의, 캐싱, 실시간 업데이트 등 운영 부담 증가\n\n**veto_if:**\n- 백테스트에서 제안된 임계값이 일관되게 고점 매수 신호를 생성하고, 이후 유의미한 수익률 하락을 보인 경우\n- 섹터 정의가 수동 관리되어 시장 변화에 대한 적시 업데이트가 불가능한 경우\n- 실험 결과가 보수적/리바운드 철학에 부합하는 대안을 찾지 못한 경우\n\n---\n\n## Recommendations\n\n### immediate_actions\n\n1. **\"핫\" 섹터 정의 재정의 (1주일 내)**\n   - 절대 수익률 대신 **상대적 강도(Relative Strength)** 도입:\n     ```\n     RS = 섹터 3일 수익률 - KOSPI 3일 수익률\n     ```\n   - 추세 지속성 확인:\n     ```\n     Trend_OK = (섹터 5일 MA > 20일 MA) AND (RS > +1.5%)\n     ```\n   - **부스트 조건**: `Trend_OK = True` 일 때만 `+10` 적용 (절대값 `+3%` 제거)\n   - **페널티 조건**: 섹터 5일 수익률 < -3% AND 5일 MA < 20일 MA → `-10` 적용\n\n2. **페널티 로직 우선 구현 (2주일 내)**\n   - 보수적 관점 강화: 낙폭 과대 섹터 회피 로직부터 먼저 적용\n   - 부스트는 추가 검증 후 도입 (3주차 이후)\n   - 이유: 손실 회피가 수익 추구보다 심리적/재무적 영향이 큼\n\n3. **섹터 정의 및 데이터 소스 명확화 (1주일 내)**\n   - `config/sector_definitions.json` 생성:\n     - 현재 KSIC 기반 분류 문서화\n     - 각 섹터별 \"top 5 market-cap\" 종목 리스트 (일일 업데이트 자동화)\n     - 업데이트 주기: 매일 09:00 (장 개장 전)\n   - Redis 캐싱 전략: `sector:momentum:{sector_code}` → TTL 1일\n\n---\n\n### experiments\n\n**Experiment 1: 상대적 강도 + 추세 지속성 백테스트**\n\n- **hypothesis**: 절대 수익률 대신 상대적 강도와 추세 지속성을 결합하면, 고점 매수 위험을 줄이면서도 유의미한 섹터 모멘텀 신호를 포착할 수 있다.\n\n- **method**:\n  1. 과거 3년 일일 데이터 수집 (KOSPI, 섹터별 지수, 종목 가격)\n  2. 매일 상대적 강도(RS) 및 추세 지속성 계산\n  3. 조건 충족 섹터에 `+10` 부스트 적용 → Scout 가상 포트폴리오 시뮬레이션\n  4. 기존 Scout(섹터 요소 없음) vs. 신규 Scout(상대적 강도 기반) 비교\n\n- **success_metrics**:\n  - Sharpe Ratio 5% 이상 개선\n  - Max Drawdown 10% 이내 유지\n  - 부스트 적용 종목의 5일 후 평균 수익률 > 시장 평균 + 2%\n  - 고점 매수 사례(부스트 후 3일 내 -5% 이상 하락) < 전체 부스트의 15%\n\n**Experiment 2: 동적 테마 클러스터링 (LLM 기반)**\n\n- **hypothesis**: 정적 섹터 분류(KSIC)는 신흥 테마를 놓치므로, LLM 기반 동적 클러스터링을 도입하면 새로운 기회를 3-5일 더 빨리 포착할 수 있다.\n\n- **method**:\n  1. 뉴스 헤드라인, 기업 공시, 애널리스트 리포트 수집 (일일)\n  2. LLM(예: GPT-4 또는 로컬 모델)에 입력: \"다음 텍스트에서 투자 테마를 식별하고, 관련 종목을 나열하세요\"\n  3. 동적 테마 클러스터 생성 (예: \"AI 반도체\", \"로봇 자동화\", \"전기차 충전\")\n  4. 각 클러스터 내 종목의 3일 수익률 계산 → 테마 모멘텀 지표 생성\n  5. 기존 KSIC 섹터 vs. 동적 테마 클러스터의 신호 선행성 비교\n\n- **success_metrics**:\n  - 동적 테마가 KSIC 섹터보다 3회 이상 시장 움직임을 선행하여 식별\n  - 동적 테마 모멘텀 적용 시 신흥 고성장 종목 포착률 15% 이상 증가\n  - LLM 클러스터링의 정확도(수동 검증 기준) > 85%\n\n**Experiment 3: 페널티 로직 단독 검증 (2주일)**\n\n- **hypothesis**: 부스트 없이 페널티 로직만 적용해도 고점 매수 및 낙폭 과대 회피로 인해 Sharpe Ratio 3% 이상 개선될 수 있다.\n\n- **method**:\n  1. 낙폭 과대 섹터 정의: 5일 수익률 < -3% AND 5일 MA < 20일 MA\n  2. 해당 섹터 종목에 `-10` 페널티 적용\n  3. 기존 Scout vs. Scout + 페널티 로직 비교 (3년 백테스트)\n\n- **success_metrics**:\n  - Sharpe Ratio 3% 이상 개선\n  - Max Drawdown 5% 이상 감소\n  - 페널티 적용 후 3일 내 추가 손실 회피율 > 70%\n\n---\n\n### if_code_change_needed\n\n**최소 범위 구현 (Phased Approach)**\n\n**Phase 1: 페널티 로직 (2주일, 낮은 리스크)**\n\n```python\n# services/buy-scanner/sector_momentum.py (신규 파일)\n\nclass SectorMomentumCalculator:\n    \"\"\"섹터 모멘텀 계산 (페널티 로직만 포함)\"\"\"\n    \n    def __init__(self, redis_client, sector_config_path):\n        self.redis = redis_client\n        self.sectors = self._load_sector_definitions(sector_config_path)\n    \n    def calculate_sector_momentum(self, sector_code: str, lookback_days: int = 5) -> dict:\n        \"\"\"\n        섹터 모멘텀 계산\n        Returns: {\n            'sector_code': str,\n            'return_5d': float,  # 5일 수익률\n            'ma_5d': float,      # 5일 이동평균\n            'ma_20d': float,     # 20일 이동평균\n            'penalty_score': int # -10 or 0\n        }\n        \"\"\"\n        # Redis에서 캐시된 데이터 확인 (TTL: 1일)\n        cache_key = f\"sector:momentum:{sector_code}\"\n        cached = self.redis.get(cache_key)\n        if cached:\n            return json.loads(cached)\n        \n        # 섹터 지수 데이터 조회 (DB 또는 API)\n        sector_data = self._fetch_sector_index(sector_code, lookback_days=20)\n        \n        # 5일, 20일 이동평균 계산\n        ma_5d = sector_data['close'][-5:].mean()\n        ma_20d = sector_data['close'][-20:].mean()\n        return_5d = (sector_data['close'][-1] / sector_data['close'][-6] - 1) * 100\n        \n        # 페널티 로직: 낙폭 과대 섹터 식별\n        penalty_score = 0\n        if return_5d < -3.0 and ma_5d < ma_20d:\n            penalty_score = -10\n        \n        result = {\n            'sector_code': sector_code,\n            'return_5d': return_5d,\n            'ma_5d': ma_5d,\n            'ma_20d': ma_20d,\n            'penalty_score': penalty_score,\n            'timestamp': datetime.now().isoformat()\n        }\n        \n        # Redis 캐싱 (TTL: 86400초 = 1일)\n        self.redis.setex(cache_key, 86400, json.dumps(result))\n        return result\n    \n    def apply_penalty_to_candidates(self, candidates: List[dict]) -> List[dict]:\n        \"\"\"\n        후보 종목에 섹터 페널티 적용\n        candidates: [{'ticker': 'xxx', 'sector_code': 'yyy', 'base_score': 75}, ...]\n        \"\"\"\n        for candidate in candidates:\n            sector_code = candidate.get('sector_code')\n            if not sector_code:\n                continue\n            \n            momentum = self.calculate_sector_momentum(sector_code)\n            candidate['sector_penalty'] = momentum['penalty_score']\n            candidate['final_score'] = candidate['base_score'] + momentum['penalty_score']\n        \n        return candidates\n```\n\n**Phase 2: 상대적 ",
  "error": "JSON Parse Failed: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)",
  "raw_json_snippet": "{sector_code}` → TTL 1일\n\n---\n\n### experiments\n\n**Experiment 1: 상대적 강도 + 추세 지속성 백테스트**\n\n- **hypothesis**: 절대 수익률 대신 상대적 강도와 추세 지속성을 결합하면, 고점 매수 위험을 줄이면서도 유의미한 섹터 모멘텀 신호를 포착할 수 있다.\n\n- **method**:\n  1. 과"
}
```
### Junho
```json
{
  "text": "## Verdict\n- decision: approve_with_changes\n- confidence: 75\n- scope: Scout 시스템에 섹터/테마 모멘텀 요소를 도입하되, 초기 단계에서는 페널티 로직에 집중하고, 부스트 로직은 추가 검증 후 도입합니다. \n\n## Key Findings (<=5)\n1. **고점 매수 위험**: 절대 수익률 기반의 `+3% in 3일` 임계값은 이미 상승한 섹터를 '핫'하다고 판단하게 하여, 추격 매수 후 조정에 취약하게 만들 수 있습니다.\n2. **상대적 강도 및 추세 미고려**: 섹터 모멘텀을 단순히 절대 수익률로만 판단하는 것은 잘못된 신호를 생성할 수 있으며, 상대적 강도와 추세 지속성을 고려해야 합니다.\n3. **정적 섹터 정의의 한계**: KSIC 코드 기반의 정적 분류는 시장에서 빠르게 부상하는 새로운 테마를 적시에 포착하기 어렵습니다.\n4. **비대칭적 리스크-리턴**: '낙폭 과대 섹터'에 대한 페널티는 보수적 관점에 부합하지만, '핫 섹터'에 대한 부스트는 고점 매수 위험이 높아 리스크-리턴 균형이 맞지 않습니다.\n5. **데이터 신선도 및 신뢰성**: \"top 5 market-cap stocks\"의 선정 기준과 업데이트 주기가 명확하지 않아, 섹터 대표성이 시간에 따라 약화될 수 있습니다.\n\n## Evidence\n- references:\n    - `reports/council_consultation_sector_theme.md`: \"Avg 3-day return of top 5 market-cap stocks in the sector.\"\n    - `reports/council_consultation_sector_theme.md`: \"If Sector Momentum > Threshold (e.g., +3% in 3 days): Apply +10 point boost\"\n    - `reports/council_consultation_sector_theme.md`: \"If Sector Momentum < Negative Threshold: Apply -10 penalty\"\n    - `services/buy-scanner`: (섹터 모멘텀 기능이 통합될 대상 모듈)\n- missing_data:\n    - `metrics/sector_momentum_distribution_historical.csv`: 과거 3일 수익률 +3% 이상을 기록한 섹터들이 이후 1일, 3일, 5일간 어떤 성과를 보였는지에 대한 분포 데이터가 필요합니다.\n    - `config/sector_definitions.json`: 현재 시스템이 사용하는 섹터 분류 기준 및 각 섹터에 포함되는 종목 리스트가 필요합니다.\n    - `logs/scout_scoring_history.log`: 기존 `Scout` 시스템에서 고점 매수 또는 낙폭 과대 종목을 필터링하지 못해 발생한 손실 사례에 대한 로그가 필요합니다.\n\n## Risks & Veto Triggers\n- risks:\n    - **고점 매수 (Buying at the Top)**: 제안된 `+3% in 3 days` 임계값은 이미 상당한 상승을 보인 섹터를 '핫'하다고 판단하게 하여, 추격 매수 후 조정에 취약하게 만들 수 있습니다.\n    - **잘못된 섹터 분류/정의**: 정적이고 광범위한 섹터 분류는 시장의 미묘한 테마 변화나 신흥 산업을 포착하지 못할 수 있습니다.\n    - **데이터 스파이크/노이즈에 취약**: 단기 3일 수익률은 특정 이벤트나 노이즈에 의해 왜곡될 수 있습니다.\n    - **과도한 포트폴리오 집중**: 특정 '핫' 섹터에 대한 과도한 점수 부스트는 포트폴리오가 소수의 섹터에 집중되어 분산 효과를 저해할 위험이 있습니다.\n- veto_if:\n    - 섹터 모멘텀 지표가 과거 백테스트에서 일관되게 고점 매수 신호를 생성하고, 이후 유의미한 수익률 하락을 보인다는 증거가 발견될 경우.\n    - 섹터 정의 및 종목 매핑이 수동으로 관리되어 시장 변화에 대한 적시 업데이트가 불가능한 경우.\n\n## Recommendations\n- immediate_actions:\n    1. **\"핫\" 섹터 정의 재검토**: 절대 수익률이 아닌 상대적 강도와 추세 지속성을 고려한 \"핫\" 섹터 정의를 수립합니다.\n    2. **페널티 로직 우선 적용**: `Scout`의 보수적 관점을 강화하기 위해, '낙폭 과대 섹터'에 대한 `-10` 페널티 로직을 먼저 구현하고 그 효과를 검증합니다.\n    3. **동적 테마/섹터 분류 연구 시작**: KSIC 코드와 같은 정적 분류 외에, 뉴스 기사, 소셜 미디어 트렌드 등을 활용하여 시장에서 부상하는 동적 테마를 식별하는 방법을 연구합니다.\n- experiments:\n    1. **hypothesis**: 절대 수익률 기반의 섹터 모멘텀 부스트는 고점 매수 위험이 높으므로, 상대적 강도 및 추세 지속성 지표를 활용하면 더 안정적인 '핫' 섹터 식별이 가능할 것이다.\n        - **method**: 상대적 강도 및 추세 지속성 지표를 개발하고, 백테스트를 통해 성과를 검증합니다.\n        - **success_metrics**: 기존 `Scout` 대비 백테스트 기간 동안의 샤프 비율 5% 이상 개선.\n    2. **hypothesis**: 정적 섹터 분류(KSIC)는 시장의 동적 테마를 포착하는 데 한계가 있으므로, LLM 기반의 동적 테마 클러스터링을 도입하면 새로운 기회를 더 빠르게 식별할 수 있을 것이다.\n        - **method**: 뉴스 데이터 수집 및 LLM을 활용한 동적 테마 클러스터링을 통해 신흥 테마를 식별합니다.\n        - **success_metrics**: 동적 테마 클러스터가 기존 정적 섹터 분류로는 포착하기 어려운 유의미한 시장 움직임을 3회 이상 선행하여 식별.\n\n## Questions to the User (optional, <=3)\n- 현재 `Scout` 시스템에서 '고점 매수' 또는 '낙폭 과대'로 인해 발생한 구체적인 손실 사례나 놓친 기회에 대한 데이터가 있습니까?\n- \"20+ sectors\"는 어떤 기준으로 정의되어 있으며, 이 섹터 분류는 얼마나 자주 업데이트됩니까?\n- `Scout` 시스템의 전반적인 목표 수익률 및 최대 허용 낙폭은 어느 정도로 설정되어 있습니까?",
  "decision": "neutral",
  "raw_output": true
}
```

</details>

---
## Cost Summary
| Model | Input | Output | Cost (USD) |
|-------|-------|--------|------------|
| Jennie (Gemini) | 0 | 0 | $0.0000 |
| Minji (Claude) | 2,872 | 2,208 | $0.2087 |
| Junho (OpenAI) | 0 | 0 | $0.0000 |
| Orchestrator (OpenAI) | 5,398 | 602 | $0.0012 |
| **Total** | - | - | **$0.2099** (≈304원) |
