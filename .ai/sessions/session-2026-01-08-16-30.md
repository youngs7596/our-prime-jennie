# Session Handoff: Scout Job 아키텍처 개선 및 LLM 프롬프트 버그 수정

## 요약 (Summary)
Scout Job의 Unhealthy 문제를 해결하기 위해 API 서버(`scout-job`)와 Worker(`scout-worker`)를 분리하고, LLM 프롬프트에서 발생하던 0점 점수 버그를 수정했습니다. 또한 tradelog의 혼란스러운 "Auto-Rejected" 문구를 명확하게 개선했습니다.

## 변경 사항 (Changes)

### 핵심 수정
- `docker-compose.yml`: scout-job/scout-worker 서비스 분리, LLM_DEBUG_ENABLED=true
- `services/scout-job/main.py`: /scout 엔드포인트 비동기 RabbitMQ 트리거 방식, Worker 모드 분리
- `shared/llm.py`: REASON 문구 "Auto-Rejected" → "RECON tier로 정찰매수 가능"
- `shared/llm_prompts.py`: 
  - Strategic Feedback 방어 문구 추가 (0점 방지)
  - Debate 환각 방지 규칙 강화
  - 중복 return 버그 수정 (Line 779)

### 추가 개선
- `services/scout-job/scout_universe.py`: `filter_valid_stocks()` ETF 필터링 함수 추가
- `services/scout-job/scout.py`: 수급 조회 3-tier fallback (KIS Gateway → KIS Direct → DB)
- `services/kis-gateway/main.py`: investor-trend 엔드포인트 추가
- `shared/kis/gateway_client.py`: GatewayMarketData 프록시 클래스 추가
- `scripts/collect_investor_trading.py`: pykrx → KIS Gateway 전환

### Redis 설정
- `analyst:feedback:summary`: 0점 방지 문구로 수정 완료

## 검증 결과
- Scout Job 실행 성공 (소요: 1271초, 15개 종목 Dashboard 저장)
- 0점 점수 미발생 확인 (정량 점수 ±20점 범위 내 정상 산정)
- 새 REASON 문구 정상 출력 확인

## 다음 단계 (Next Steps)
- 기아 ICCU 리콜 뉴스(1월 3일) 수집 여부 모니터링
- Debate 환각 방지 효과 검증 (경쟁사 리스크 언급 정확도)
- Scout Worker 안정성 장기 모니터링
