# Session Handoff: Fact Checker Fix & AI Auditor Planning

## 요약 (Summary)
이번 세션에서는 Scout 파이프라인의 **Fact-Checker 환각 오탐지(False Positive)** 문제를 해결하고, 향후 도입할 **AI 감사 시스템(AI Auditor)**에 대한 기획 및 비용 분석을 완료했습니다.

Fact-Checker가 LLM이 분석에 사용한 "정량 점수(Quant Score)"와 "재무 데이터(Snapshot)"를 알지 못해 발생하던 문제를, 해당 컨텍스트를 주입하는 방식으로 해결했습니다. 또한, 더욱 정교한 감사를 위해 Cloud LLM(Gemini 2.5 Pro) 도입을 결정했으며, 비용 폭탄 방지를 위한 안전장치(일일 예산 제한)를 설계했습니다.

## 변경 사항 (Changes)
- `services/scout-job/scout_pipeline.py`: Fact-Checker 호출 시 `quant_context`와 `snapshot_context`를 함께 전달하도록 수정.
- `tests/shared/test_fact_checker.py`: 수정된 로직을 검증하기 위한 회귀 테스트 케이스 (`test_check_quant_context_match`) 추가.
- `CHANGELOG.md`: 2025-12-28 작업 내역 업데이트.
- `task.md`: AI Auditor 구현 계획 추가.
- `walkthrough.md`: Fact Checker 수정 내역 및 검증 결과 문서화.

## 주요 결정 사항 (Decisions)
- **AI Auditor 모델 선정**: **Gemini 2.5 Pro** ($1.25/1M Input)
  - 선정 이유: GPT-5.2($1.75) 및 Claude Sonnet 4.5($3.00) 대비 저렴하며, Flash 모델보다 높은 지능 보유.
  - 비용 통제: 일일 감사 횟수 제한(예: 10회) 및 예산 Cap($1.00/day) 적용 필수.

## 다음 단계 (Next Steps)
- [ ] **AI Auditor 구현**:
    - `shared/auditor.py` 모듈 생성.
    - Gemini 2.5 Pro 연동 및 `Auditor` 클래스 구현.
    - 확률적 샘플링(Sampling) 로직 (전체 실행의 5~10%) 구현.
- [ ] **안전장치 구축**:
    - 일일 API 호출 비용 추적 및 $1.00 초과 시 차단 로직 구현.
- [ ] **통합 테스트**:
    - Auditor가 실제 "환각"을 잡아내는지 모의 테스트(Mocking) 진행.
