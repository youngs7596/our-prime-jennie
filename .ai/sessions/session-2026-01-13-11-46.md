# Session Handoff: Redis Streams WebSocket 아키텍처 구현

## 요약 (Summary)
KIS API의 동시 WebSocket 연결 제한으로 인한 "Connection reset by peer" 오류를 해결하기 위해 Redis Streams 기반 단일 WebSocket 공유 아키텍처를 구현했습니다.

## 변경 사항 (Changes)
- `shared/kis/stream_consumer.py`: Redis Consumer Groups 기반 `StreamPriceConsumer` 클래스 신규 생성
- `services/kis-gateway/main.py`: `KISWebSocketStreamer` 싱글톤, `/api/realtime/subscribe`, `/api/realtime/status` 엔드포인트 추가
- `services/buy-scanner/main.py`: `_start_redis_streams_monitoring()` 함수 및 `USE_REDIS_STREAMS` 환경변수 지원 추가
- `services/price-monitor/monitor.py`: `_monitor_with_redis_streams()` 메서드 추가
- `docker-compose.yml`: `buy-scanner`, `price-monitor`에 `USE_REDIS_STREAMS=true`, `KIS_GATEWAY_URL` 환경변수 추가

## 아키텍처
```
KIS WebSocket API → kis-gateway (단일 연결) → Redis Streams (kis:prices) → buy-scanner, price-monitor (Consumer Groups)
```

## 다음 단계 (Next Steps)
- [ ] 서비스 리빌드: `docker compose --profile real build kis-gateway buy-scanner price-monitor`
- [ ] 서비스 재시작 및 로그 확인
- [ ] Redis Streams 정상 동작 검증 (XINFO GROUPS kis:prices)
- [ ] "Connection reset" 오류 해소 확인
