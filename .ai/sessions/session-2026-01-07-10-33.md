# Session Handoff: News Crawler Optimization & Rules Update

## 요약 (Summary)
이번 세션에서는 `news-crawler`의 성능 저하 원인을 분석하고, 사용자의 피드백과 벤치마크를 기반으로 **순차적 배치 처리(Sequential Batch Processing)**로 원복하여 처리 속도를 2.5배 향상시켰습니다. 또한 `gpt-oss:20b`의 JSON 파싱 불안정 문제를 **One-Shot Example 프롬프트**로 해결하고, 이러한 기술적 의사 결정을 `rules.md`에 문서화했습니다.

## 변경 사항 (Changes)
- **Services**:
  - `services/news-crawler/crawler.py`: `ThreadPoolExecutor` 제거, 순차 루프(Sequential Batch) 복원.
- **Infrastructure**:
  - `docker-compose.yml`, `infrastructure/env-vars-wsl.yaml`: `OLLAMA_NUM_PARALLEL`을 4에서 2로 원복.
  - `infrastructure/env-vars-wsl.yaml`: `LOCAL_MODEL_FAST` 등 모든 Local Tier 모델을 `gpt-oss:20b`로 명시.
- **Prompts**:
  - `shared/llm_prompts.py`: `UNIFIED_NEWS_ANALYSIS_PROMPT`에 One-Shot JSON Example 추가 (JSON 안정성 확보).
- **Documentation**:
  - `rules.md`: '주요 의사 결정(Key Decisions)' 섹션 추가 (모델 표준화, 배치 처리 우선 규칙).
  - `CHANGELOG.md`: 금일 작업 내역 업데이트.
  - `walkthrough.md`: 성능 검증 결과(2.5x Speedup) 업데이트.

## 검증 결과 (Verification)
- **성능**: 배치당 처리 시간 32초 → 12초 (약 2.6배 향상).
- **안정성**: `gpt-oss:20b` 모델의 JSON 구문 오류 완전 제거 (`Expecting ',' delimiter` Error Free).

## 다음 단계 (Next Steps)
- [ ] **Phase 3: Train/Test 70/30 Split**
  - `utilities/backtest_gpt_v2.py` 수정하여 Overfitting 방지 로직 강화.
- [ ] **Phase 1: Minute Data Collection**
  - Intraday 데이터 수집 스크립트 구현.
- [ ] **Scout Job 재개**
  - `ENABLE_SCOUT_JOB_WORKER` True 원복 및 스케줄링 재개.
