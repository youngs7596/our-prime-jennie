# Session Handoff: Implement LLM Backtest & Analyze Simulator Divergence

## 요약 (Summary)
이번 세션에서는 Prime Council의 제안을 받아들여 **LLM 판단 이력(LLM_DECISION_LEDGER)을 백테스트에 통합**하는 기능을 구현했습니다. ChatGPT의 추가 피드백을 반영하여 `effective_date` 기반의 룩어헤드 방어 로직과 Carry-forward 메커니즘을 적용했습니다.
검증 과정에서 2025년 하반기 KOSPI가 **+48% 폭등**했음에도 불구하고 시뮬레이터는 **-10% 손실**을 기록하는 심각한 괴리를 발견했습니다. 이는 시뮬레이터의 매매 로직(특히 익절/손절 규칙)이 대세 상승장을 반영하지 못하고 있음을 시사하며, 이에 대한 원인 분석이 진행 중입니다.

## 변경 사항 (Changes)
- `utilities/backtest_scout_e2e.py`:
  - `load_llm_decisions_for_date()` 메서드 구현 (DECISION_LEDGER/WATCHLIST_HISTORY 통합, 룩어헤드 방어).
  - `--use-llm-decisions` CLI 옵션 추가.
  - LLM Decision 기반 Hot Watchlist 구성 로직 추가.
- `utilities/check_kospi.py`: KOSPI 지수 변동률 검증 스크립트 작성 (DB 조회).
- `logs/`: 백테스트 결과 및 매매 로그 생성.

## 다음 단계 (Next Steps)
- `logs/backtest_scout_e2e_trades_*.csv` 정밀 분석:
  - 조기 익절(Take Profit +15%)이 대세 상승장 수익을 제한했는지 확인.
  - 11월 폭등장 진입 실패 원인 규명.
- 시뮬레이터 매도 로직 개선:
  - Trailing Stop 도입 고려.
  - 시장 레짐(Bull Market) 감지 시 목표 수익률 상향 조정.
- LLM Decide 모델 개선 (필요시):
  - 후행성 신호 여부 점검.
