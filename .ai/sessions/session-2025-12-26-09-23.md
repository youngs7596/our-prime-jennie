# Session Handoff: LLM Cost Optimization & Config DB Priority

## 요약 (Summary)
LLM 비용 최적화 및 설정값 관리 체계 개선 세션입니다. Gemini/OpenAI 기본 모델을 저렴한 모델로 변경하고, Dashboard에서 운영 튜닝 키를 수정할 때 DB 값이 우선 적용되도록 로직을 개선했습니다.

## 변경 사항 (Changes)

### LLM 비용 최적화
- `shared/llm_providers.py`: Gemini 기본 모델 `gemini-3-pro-preview` → `gemini-2.5-flash` 변경
- `shared/llm_providers.py`: OpenAI 기본 모델 `gpt-5-mini` → `gpt-4o-mini` 변경
- `shared/llm.py`: `analyze_competitor_benefit`, `analyze_news_sentiment`에서 명시적으로 Flash 모델 사용

### Config DB Priority 구현
- `shared/config.py`: `ConfigManager.get()` 메서드에 `db_priority` 플래그 지원 추가
  - `db_priority=True` 키: DB → 환경변수 순서
  - `db_priority=False` 키: 환경변수 → DB 순서 (기존)
- `shared/settings/registry.py`: 17개 운영 튜닝 키에 `db_priority=True` 추가
  - LLM 점수: `MIN_LLM_SCORE`, `MIN_LLM_SCORE_TIER2`, `MIN_LLM_SCORE_RECON`
  - 정찰병: `RECON_POSITION_MULT`, `RECON_STOP_LOSS_PCT` 등 5개
  - 시그널: `BUY_GOLDEN_CROSS_SHORT/LONG`, `BUY_RSI_OVERSOLD_THRESHOLD`
  - 리스크: `MAX_BUY_COUNT_PER_DAY`, `MAX_PORTFOLIO_SIZE` 등 5개

### Config Cleanup
- `infrastructure/env-vars-wsl.yaml`: 미사용 `INVESTMENT_AMOUNT`, `DAILY_BUY_LIMIT_AMOUNT` 삭제
- `infrastructure/env-vars-mock.yaml`: 동일하게 삭제
- `infrastructure/env-vars-wsl.yaml`: `LLM_FLASH_MODEL_NAME: "gemini-2.5-flash"` 명시적 추가

## 다음 단계 (Next Steps)
- Dashboard에서 운영 튜닝 키 수정 테스트 (DB 값 우선 적용 확인)
- Scout/News-Crawler 로그 모니터링 (Gemini Flash 모델 정상 사용 확인)
- 429 Quota Exceeded 오류 발생 여부 모니터링
