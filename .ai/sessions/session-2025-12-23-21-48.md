# Session Handoff: AI Analyst Visualization & Trading Stability

## 요약 (Summary)
이번 세션에서는 AI Analyst 대시보드의 데이터를 시각적으로 강화(판단 근거 태그, 확신도 스파크라인)하고, Buy Scanner의 중복 매수 오류("Ghost Trades")를 Redis 잠금 기능으로 해결했습니다.

## 변경 사항 (Changes)
- `shared/analysis/ai_performance.py`:
    - `extract_reasoning_tags`: `llm_reason`에서 핵심 키워드("저평가", "실적" 등) 추출 로직 추가
    - `fetch_score_history`: 최근 5회 Hunter Score 이력 조회 로직 추가
    - 가격 데이터 누락 시(`entry_price=None`)에도 결정 내역을 반환하도록 수정
- `services/dashboard/backend/main.py`:
    - `/api/analyst/performance` 응답에 `tags`와 `score_history` 필드 추가
- `services/buy-scanner/scanner.py`:
    - Redis Lock(`buy_lock:{stock_code}`) 도입하여 5분간 중복 매수 신호 방지
- `services/dashboard/frontend/src/pages/Analyst.tsx`:
    - "Recent Decisions" 테이블에 `tags`(배지) 및 `score_history`(Sparkline) 시각화 추가
    - 수익률 계산 중일 때 "Pending" 배지 표시 로직 추가

## 다음 단계 (Next Steps)
- [ ] 대시보드 모니터링: "Pending" 상태인 결정들이 가격 업데이트 후 정상적으로 수익률이 표시되는지 확인
- [ ] 매매 모니터링: Redis Lock 적용 후 실제로 중복 매수가 발생하는지 지속 확인
- [ ] (Future) Judge 단계 디버깅 로그 강화
