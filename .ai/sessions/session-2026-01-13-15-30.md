# Session Handoff: Airflow DAG Fixes & Daily Buy Limit Resolution

## 요약 (Summary)
Airflow DAGs의 "무한 대기" 문제를 해결하기 위해 직접 실행이 아닌 API 호출(비동기) 방식으로 전환하고, 사용자 요청에 따라 일일 매수 한도를 4회에서 6회로 상향 조정(DB 및 Preset 수정)하여 운영 안정성을 확보함.

## 변경 사항 (Changes)
- `dags/scout_job_dag.py`, `dags/news_crawler_dag.py`, `dags/price_monitor_dag.py`: PythonOperator/BashOperator(스크립트 실행) → `curl` API Trigger로 변경.
- `services/news-crawler/main.py`: `/crawl` 엔드포인트를 비동기(RabbitMQ/Background) 방식으로 리팩토링.
- `dags/host_consolidated_dag.py`: `COMMON_ENV` 주입으로 DB 연결 오류 해결.
- `scripts/collect_investor_trading.py`: `init_engine()` 호출 추가로 RuntimeError 수정.
- `shared/settings/registry.py`: `MAX_BUY_COUNT_PER_DAY` 기본값 6 확인 (문제 없음).
- `configs/gpt_v2_strategy_presets.json`: 모든 전략 프리셋의 `max_buys_per_day`를 3/4 → 6으로 수정.
- `DB (system_settings)`: `MAX_BUY_COUNT_PER_DAY` 값을 4 → 6으로 업데이트.
- `docker-compose.yml`: Airflow 서비스에 `./scripts` 볼륨 마운트 추가.
- `dags/daily_council_dag.py`: 삭제.

## 다음 단계 (Next Steps)
- Airflow DAG 동작 모니터링 (특히 `scout_job` 완료 후 `buy_executor` 트리거 정상 여부).
- 5분 캐시 만료 후 혹은 재시작 후 `scout-job`에서 변경된 매수 한도(6회)가 정상 적용되는지 확인.
