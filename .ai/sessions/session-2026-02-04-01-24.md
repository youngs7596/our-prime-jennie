# Session Handoff: Macro Council 데이터 표시 문제 수정

## 요약 (Summary)
Macro Council 페이지에서 VIX, 글로벌 지표, 투자자 순매수, 3현자 리뷰가 표시되지 않는 문제를 수정했습니다.
또한 enhanced_macro 수집 시 부분 수집된 데이터가 NULL로 덮어쓰이는 버그를 수정했습니다.

## 변경 사항 (Changes)

### Backend
- `shared/macro_insight/daily_insight.py`: SQL INSERT/UPDATE에 VIX_VALUE, USD_KRW, KOSPI_INDEX 등 글로벌 스냅샷 컬럼 추가
- `services/dashboard/backend/main.py`: 
  - `/api/council/daily-review` API를 DAILY_MACRO_INSIGHT에서 RAW_COUNCIL_OUTPUT 파싱하도록 수정
  - `council_cost_usd` Decimal→Number 형변환 추가

### Scripts
- `scripts/collect_enhanced_macro.py`: 
  - `merge_snapshots()` 함수 추가 - 기존 스냅샷과 새 스냅샷 병합
  - 저장 전 기존 데이터 로드 후 None이 아닌 값만 업데이트

### Airflow DAGs
- `dags/macro_council_dag.py`: COMMON_ENV에 DB 환경변수 추가
- `dags/utility_jobs_dag.py`: `collect_daily_prices` 태스크에 30분 타임아웃 설정

## 테스트 결과
- VIX: 26.86 ✅
- USD/KRW: 1457.30 ✅
- 3현자 Council 리뷰 정상 표시 ✅
- macro_council DAG 실행 시간: 약 2분 25초 (정상)

## 다음 단계 (Next Steps)
- 장중 KOSPI/KOSDAQ 데이터 수집 확인 (09:00-15:30 사이 enhanced_macro_quick DAG)
- 투자자 순매수 데이터 수집 검증 (pykrx 연동)
- API 응답 시간 최적화 검토
