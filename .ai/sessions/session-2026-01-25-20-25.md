# Session Handoff: System Ops & Visual Logic Refactoring

## 요약 (Summary)
Airflow `weekly_factor_analysis` 작업이 Docker 환경에서 `python` 명령어를 찾지 못해 실패하던 문제를 `python3` 명시적 사용으로 해결했습니다. 또한, 대시보드의 `VisualLogic` 차트가 수학적으로 어색하다는 지적에 따라, 모의 데이터 생성 로직을 리팩토링하여 실제 보조지표(SMA, BB, RSI) 수식을 적용, 시각적 사실성을 확보했습니다.

## 변경 사항 (Changes)
- **Airflow & Scripts**:
    - `scripts/weekly_factor_analysis_batch.py`: `sys.executable` fallback을 `python` → `python3`로 변경.
    - `dags/host_consolidated_dag.py`: BashOperator 명령어를 `python` → `python3`로 수정하여 실행 환경 호환성 확보.
- **Frontend (Visual Logic)**:
    - `services/dashboard/frontend/src/pages/logic/VisualLogic.tsx`: 
        - 랜덤/사인파 기반의 단순 렌더링을 제거.
        - `calculateSMA`, `calculateBollingerBands`, `calculateRSI` 함수 구현.
        - 시나리오(Sideways, Bull, Bear)별로 가격(Price)을 먼저 생성하고, 지표를 후행적으로 계산하여 차트 정합성(캔들이 밴드 안에 위치, 이평선 추세 일치 등) 구현.

## 다음 단계 (Next Steps)
- **System Monitoring**: 수정된 Airflow DAG(`weekly_factor_analysis`)가 다음 주간 일정(금요일 13:00 UTC) 또는 수동 트리거 시 정상 동작하는지 모니터링 필요.
- **Trading Verification**: `VisualLogic`은 시뮬레이션이므로, 실제 매매 로직(`services/execution_engine.py`)과 `VisualLogic`의 시나리오가 논리적으로 계속 일치하는지 주기적인 점검 권장.
