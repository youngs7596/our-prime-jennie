# Session Handoff: Portfolio 중복 버그 수정 및 MCP 설정

## 요약 (Summary)
대시보드에서 4건의 거래가 표시되는 문제를 진단하여 `PORTFOLIO` 테이블에 중복 `HOLDING` 레코드가 생성되는 버그를 발견 및 수정함. 추가로 `CURRENT_HIGH_PRICE` 초기화 누락 문제 수정 및 MariaDB MCP 서버 설정 완료.

## 변경 사항 (Changes)
- `shared/database/trading.py`: `execute_trade_and_log`가 호출자 세션을 재사용하도록 수정 (중복 INSERT 방지)
- `shared/database/trading.py`: 신규 매수 INSERT 시 `CURRENT_HIGH_PRICE` 초기화 추가
- `shared/redis_cache.py`: 최고가 갱신 시 DB `PORTFOLIO.CURRENT_HIGH_PRICE`도 업데이트
- `services/buy-executor/executor.py`: 잘못된 Redis lock 패치 롤백
- `~/.gemini/settings.json`: MariaDB MCP 서버 설정 추가

## 다음 단계 (Next Steps)
- 새 채팅 세션에서 MCP 서버 활성화 확인
- 장중 `CURRENT_HIGH_PRICE` 갱신 로그 모니터링
